function Matrix(d,e){var a=this;a.rows=isNaN(d)?3:parseInt(d);a.cols=isNaN(e)?3:parseInt(e);a.determinant=null;a.cofactor=null;a.transpose=null;a.adjunct=null;a.inverse=null;a.mat=[];for(var c=0;c<a.rows;c++){a.mat[c]=[];for(var b=0;b<a.cols;b++){a.mat[c][b]=0}}}Matrix.prototype.getValue=function(c,b){var a=this;if(c>=0&&c<a.rows&&b>=0&&b<a.cols){return a.mat[c][b]}else{throw new TypeError("Indice de matriz inválido:["+c+"]["+b+"]")}};Matrix.prototype.setValue=function(d,b,c){var a=this;if(d>=0&&d<a.rows&&b>=0&&b<a.cols){if(!isNaN(c)){a.mat[d][b]=c;a.determinant=null}else{throw new TypeError("O valor passado como parâmetro deve ser um numero")}}else{throw new TypeError("Indice de matriz inválido:["+d+"]["+b+"]")}};Matrix.prototype.setRow=function(c,b){var a=this;if(c>=0&&c<a.rows){if(b instanceof Array&&b.length==a.cols){a.mat[c]=b;a.determinant=null}else{throw new TypeError("A quantidade de colunas deve ser a mesma da matriz")}}else{throw new TypeError("Indice de linha invalido["+c+"]")}};Matrix.prototype.setCol=function(c,b){var a=this;if(c>=0&&c<a.cols){if(b instanceof Array&&b.length==a.rows){for(var d=0;d<a.mat.length;d++){a.mat[d][c]=b[d]}a.determinant=null}else{throw new TypeError("A quantidade de colunas deve ser a mesma da matriz")}}else{throw new TypeError("Indice de coluna invalido[i]["+c+"]")}};Matrix.prototype.getRow=function(b){var a=this;if(b>=0&&b<=a.rows){return a.mat[b]}return null};Matrix.prototype.getCol=function(c){var b=this;if(c>=0&&c<=b.cols){var a=[];for(var d=0;d<b.mat.length;d++){a[d]=b.mat[d][c]}return a}return null};Matrix.prototype.cofactor=function(){var a=this;if(arguments.length==2){var e=arguments[0];var c=arguments[1];if(e>=0&&e<a.rows&&c>=0&&c<a.cols){return Math.pow(-1,e+c)*a.subMat(e,c).determinant()}else{throw new TypeError("Indice inexistente["+e+"]["+c+"]")}}else{if(a.cofactor==null){a.cofactor=new Matrix(a.rows,a.cols);for(var d=0;d<a.rows;d++){for(var b=0;b<a.cols;b++){a.cofactor.setValue(d,b,a.obterCofator(d,b))}}}return a.cofactor}};Matrix.prototype.subMat=function(k,a){var h=this;if(k>=0&&k<h.rows&&a>=0&&a<h.cols){var b=h.rows-1;var e=new Matrix(b,b);var g=0;var f=0;for(var d=0;d<h.mat.length;d++){if(d!=k){for(var c=0;c<h.mat[d].length;c++){if(c!=a){e.setValue(g,f,h.mat[d][c]);f++;if(f==b){f=0;g++}}}}}return e}else{throw new TypeError("Indice inexistente["+k+"]["+a+"]")}};Matrix.prototype.transpose=function(){var a=this;if(a.transpose==null){a.transpose=new Matrix(a.cols,a.rows);for(var c=0;c<a.mat.length;c++){var b=a.getRow(c);a.transpose.setCol(c,b)}}return a.transpose};Matrix.prototype.adjunct=function(){var a=this;if(a.adjunct==null){a.adjunct=a.cofactor().transpose()}return a.adjunct};Matrix.prototype.inverse=function(){var a=this;if(a.inverse==null){if(a.determinant()!=0){a.inverse=Matrix.scale(a.adjunct(),1/a.determinant())}else{console.log("A matriz não possui matriz inversa")}}return a.inverse};Matrix.prototype.determinant=function(){var a=this;if(a.determinant==null){if(a.rows==a.cols){if(a.rows==1){a.determinant=a.getValue(0,0)}else{if(a.rows<=3){a.determinant=a.determinantBySarrus()}else{a.determinant=a.determinantByLaplace()}}}else{throw new TypeError("Não é possivel calcular a determinate porque a matriz nao e quadrada:"+a.rows+","+a.cols)}}return a.determinant};Matrix.prototype.determinantByLaplace=function(){var a=this;var d=parseInt(Math.floor(Math.random()*a.rows));var c=0;for(var b=0;b<a.mat[d].length;b++){c+=a.mat[d][b]*a.obterCofator(d,b)}return c};Matrix.prototype.determinantBySarrus=function(){var b=this;var f=0;if(b.cols==2){f=b.getValue(0,0)*b.getValue(1,1)-b.getValue(0,1)*b.getValue(1,0)}else{for(var d=0;d<3;d++){var c=0;var a=1;for(var h=d,e=0,g=0;g<3;h++,e++,g++){h=h>=b.cols?0:h;e=e>=b.rows?0:e;a*=b.getValue(e,h)}c=a;a=1;for(h=d,e=0,g=0;g<3;h--,e++,g++){h=h<0?b.cols-1:h;e=e>=b.rows?0:e;a*=b.getValue(e,h)}f+=(c-a)}}return f};Matrix.prototype.toString=function(){var a=this;var d="";for(var c=0;c<a.mat.length;c++){d+="\n";for(var b=0;b<a.mat[c].length;b++){d+="["+a.getValue(c,b)+"]"}}return d};Matrix.sum=function(d,c){if(d instanceof Matrix&&c instanceof Matrix){if(d.rows==c.rows&&d.cols==c.cols){var b=d.rows;var a=c.cols;var g=new Matrix(b,a);var f;var e;for(f=0;f<b;f++){for(e=0;e<a;e++){g.setValue(f,e,d.getValue(f,e)+c.getValue(f,e))}}return g}}return null};Matrix.subtrair=function(d,c){if(d instanceof Matrix&&c instanceof Matrix){if(d.rows==c.cols&&d.rows==c.cols){var b=d.rows;var a=c.cols;var g=new Matrix(b,a);var f;var e;for(f=0;f<b;f++){for(e=0;e<a;e++){g.setValue(f,e,d.getValue(f,e)-c.getValue(f,e))}}return g}}return null};Matrix.scale=function(b,a){if(b instanceof Matrix&&!isNaN(a)){var e=new Matrix(b.rows,b.cols);var d;var c;for(d=0;d<b.rows;d++){for(c=0;c<b.cols;c++){e.setValue(d,c,b.getValue(d,c)*a)}}return e}return null};Matrix.mxm=function(c,a){if(c instanceof Matrix&&a instanceof Matrix){if(c.cols==a.rows){var h=new Matrix(c.rows,a.cols);var e;var d;var g;var f;var l=0;var b;for(e=0;e<c.rows;e++){for(d=0;d<a.cols;d++){g=c.getRow(e);f=a.getCol(d);l=0;for(b=0;b<g.length;b++){l+=g[b]*f[b]}h.setValue(e,d,l)}}return h}}return null};