define(function(){return{circleLine:function(c,o){var d=Math.med(o.pa,o.pb);var h=Math.degreeFromVec(o.pa,o.pb);var l=Math.rotate(o.pa,-h,d);var k=Math.rotate(o.pb,-h,d);var f=Math.rotate({x:c.x,y:c.y},-h,d);var m=Math.min(o.pa.y,o.pb.y);var i=Math.max(o.pa.y,o.pb.y);var n=Math.min(o.pa.x,o.pb.x);var j=Math.max(o.pa.x,o.pb.x);var g=n-c.radius;var e=m-c.radius;var b=j+c.radius;var a=i+c.radius;return(((f.x<=l.x&&f.x>=g)||(f.x>=l.x&&f.x<=b))&&(f.t<=a&&f.y>=e))},circlePoint:function(b,a){var c=Math.distance(a,{x:b.x,y:b.y});return c<=b.radius},shapePoint:function(b,a){switch(b.type){case"rect":return this.rectPoint(b,a);break;case"circle":return this.circlePoint(b,a);break;case"polygon":return this.pointOnPolygon(b,a);break}return false},rectPoint:function(b,e){var d=b.x;var f=b.y;var a=b.x+b.width;var c=b.y+b.height;return(d<=e.x&&f<=e.y&&a>=e.x&&c>=e.y)},circleRect:function(b,g){var j={x:g.x,y:g.y};var h={x:g.x+g.width,y:g.y+g.height};if(b.x>=j.x&&b.x<=h.x&&b.y>=j.y&&b.y<=h.y){return true}var i={x:g.x+g.width,y:g.y};var f={x:g.x,y:g.y+g.height};var e={pa:j,pb:i};var d={pa:i,pb:h};var c={pa:h,pb:f};var a={pa:f,pb:j};return(this.circleLine(b,e)||this.circleLine(b,d)||this.circleLine(b,c)||this.circleLine(b,a))},rectIntersectRect:function(c,a){var e=c.x;var g=c.y;var i=c.x+c.width;var b=c.y+c.height;var d=a.x;var f=a.y;var h=a.x+a.width;var j=a.y+a.height;return !(e>h||i<d||g>j||b<f)},pointOnPolygon:function(b,g){var f=b.vertices;for(var h=false,e=-1,a=f.length,d=a-1;++e<a;d=e){((f[e].y<=g.y&&g.y<f[d].y)||(f[d].y<=g.y&&g.y<f[e].y))&&(g.x<(f[d].x-f[e].x)*(g.y-f[e].y)/(f[d].y-f[e].y)+f[e].x)&&(h=!h)}return h}}});